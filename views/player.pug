doctype html
html(lang='en')
  head
    include head.pug
    link(href='/css/media-player.css', rel='stylesheet')
    link(href='/css/lyric-editor.css', rel='stylesheet')
  body
    include nav-bar.pug
    .container-fluid#root
    footer.footer
      .container
        p &copy; 2017 SociaLYTE. All Rights Reserved.
        ul.list-inline
          li
            a(href='#') Privacy
          li
            a(href='#') Terms
          li
            a(href='#') FAQ
    script(src='/js/ie10-viewport-bug-workaround.js')
    script(src='/js/keduije.js')
    script(src='/media-controls.js', type='text/babel')
    script(src='/media-player.js', type='text/babel')
    script(src='/lyric-display.js', type='text/babel')
    if (canEdit)
      script(src='/time-spinner.js', type='text/babel')
      script(src='/lyric-editor.js', type='text/babel')
    script(type='text/babel').
      var mediaType = "#{videoID}" ? KeduIje.mediaTypes.VIDEO : KeduIje.mediaTypes.AUDIO; //Improve
      var onYouTubeIframeAPIReady;
      
      KeduIje.init("#{songID}");
      
      var hi;
      function setCallback(component){
        hi=component;
        if (mediaType == KeduIje.mediaTypes.AUDIO) return;
          
        onYouTubeIframeAPIReady = component.onYouTubeIframeAPIReady;
        $.getScript( "https://www.youtube.com/iframe_api" );
      }
      ReactDOM.render(
        <MediaPlayer 
          ref={setCallback}
          canEdit={#{canEdit}}
          src={"#{src}"}
          artworkSrc={"#{artwork_src}"}
          mediaType={mediaType}
        />,
        document.getElementById('root')
      );
