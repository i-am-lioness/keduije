doctype html
html(lang='en')
  head
    include head.pug
    style.

  body
    include nav-bar.pug
    .container-fluid
      .row
        .col-md-12#root
    script(src="/js/youtube-data.js")
    script(src="/js/keduije-media.js")
    script(src='/song-info-form.js', type='text/babel')
    script(type='text/babel').
      
      function submitSongInfo(data){
        data.changeset = "#{changesetID}";
        KeduIje.createSong(data, (slug) => { 
          window.location="/music/"+slug;
        });
      }
      
      ReactDOM.render(
        <SongInfoForm 
          ref={(component) => {window.hi = component}}
          newSong={true}
          onSubmit={submitSongInfo}
          onCancel={KeduIje.deleteSong.bind(this,null)}
        />,
        document.getElementById('root')
      );  
    script(src="https://apis.google.com/js/client.js?onload=googleApiClientReady")
